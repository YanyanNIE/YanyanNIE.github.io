<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="en,zh-Hans,fr-FR,default">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32world.png?v=5.1.4">



  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Web," />










<meta name="description" content="Modélisation conceptuelle de données avec UMLRappel  de description fonctionnelle« Utilisateur » : Acteur pouvant accéder à la plate-forme d’évaluation des compétences.   Il existe 2 types d’utilisate">
<meta name="keywords" content="Web">
<meta property="og:type" content="article">
<meta property="og:title" content="SR03 PROJET MVC(P1) - DAO">
<meta property="og:url" content="http://yoursite.com/2019/05/14/projet-javaprojet-sr03/index.html">
<meta property="og:site_name" content="Ninon&#39;s">
<meta property="og:description" content="Modélisation conceptuelle de données avec UMLRappel  de description fonctionnelle« Utilisateur » : Acteur pouvant accéder à la plate-forme d’évaluation des compétences.   Il existe 2 types d’utilisate">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://yoursite.com/2019/05/14/projet-javaprojet-sr03/sr03_p_mvc_class.png">
<meta property="og:image" content="http://yoursite.com/2019/05/14/projet-javaprojet-sr03/sr03_p_sql_class.png">
<meta property="og:image" content="http://yoursite.com/2019/05/14/projet-javaprojet-sr03/sr03_p_dao_interface.png">
<meta property="og:image" content="http://yoursite.com/2019/05/14/projet-javaprojet-sr03/sr03_p_sql_users.png">
<meta property="og:image" content="http://yoursite.com/2019/05/14/projet-javaprojet-sr03/sr03_p_login.png">
<meta property="og:image" content="http://yoursite.com/2019/05/14/projet-javaprojet-sr03/sr03_p_checklogin.png">
<meta property="og:updated_time" content="2019-11-29T09:18:21.551Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SR03 PROJET MVC(P1) - DAO">
<meta name="twitter:description" content="Modélisation conceptuelle de données avec UMLRappel  de description fonctionnelle« Utilisateur » : Acteur pouvant accéder à la plate-forme d’évaluation des compétences.   Il existe 2 types d’utilisate">
<meta name="twitter:image" content="http://yoursite.com/2019/05/14/projet-javaprojet-sr03/sr03_p_mvc_class.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/05/14/projet-javaprojet-sr03/"/>





  <title>SR03 PROJET MVC(P1) - DAO | Ninon's</title>
  








</head>


<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Ninon's</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">to be continued</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/14/projet-javaprojet-sr03/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yanyan NIE">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ninon's">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">SR03 PROJET MVC(P1) - DAO</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted</span>
              
              <time title="Created" itemprop="dateCreated datePublished" datetime="2019-05-14T11:51:29+08:00">
                2019-05-14
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Modified&#58;</span>
              
              <time title="Modified" itemprop="dateModified" datetime="2019-11-29T17:18:21+08:00">
                2019-11-29
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/projet/" itemprop="url" rel="index">
                    <span itemprop="name">projet</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/14/projet-javaprojet-sr03/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/05/14/projet-javaprojet-sr03/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i> views
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text"> &#58;</span>
                
                <span title=" ">
                  1.1k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">  &asymp;</span>
                
                <span title=" ">
                  7
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="Modelisation-conceptuelle-de-donnees-avec-UML"><a href="#Modelisation-conceptuelle-de-donnees-avec-UML" class="headerlink" title="Modélisation conceptuelle de données avec UML"></a>Modélisation conceptuelle de données avec UML</h2><h3 id="Rappel-de-description-fonctionnelle"><a href="#Rappel-de-description-fonctionnelle" class="headerlink" title="Rappel  de description fonctionnelle"></a>Rappel  de description fonctionnelle</h3><p><code>« Utilisateur »</code> : Acteur pouvant accéder à la plate-forme d’évaluation des compétences. </p>
<ul>
<li>Il existe 2 types d’utilisateurs : Administrateur et stagiaire. <ul>
<li>L’administrateur est le seul à créer des comptes. </li>
<li>Le stagiaire recevra un email automatique notifiant sa création de compte. Ce dernier comportera ses identifiants (email/mot de passe généré) </li>
</ul>
</li>
<li>L’authentification s’effectue grâce à une adresse email et un mot de passe de 6 caractères minimum </li>
<li>Le compte d’un utilisateur comportera son nom, sa société, ses coordonnées téléphoniques, la date de création et le statut du compte (actif/inactif). </li>
<li>Libre à vous d’ajouter d’autres informations si besoin </li>
</ul>
<p><code>« Questionnaire/Question/Réponse »</code>: </p>
<ul>
<li>Un questionnaire est associé à une compétence spécifique ‘sujet’ qui est unique (Développement Java, Webservices etc.). </li>
<li>Un questionnaire est composé de plusieurs questions. </li>
<li>Chaque question possède une liste de réponses possibles dont 1 seul qui est bonne: 1 bonne réponse parmi les réponses proposées</li>
<li>1 réponse possible est associée à 1 seule question </li>
<li>Toutes les entités (questionnaire/question/réponse) possède des statuts (actif/inactif) </li>
<li>L’administrateur est capable de changer l’ordre des questions dans un questionnaire ainsi que l’ordre des réponses possibles à une question </li>
</ul>
<p><code>« Parcours »</code> Un parcours est la sauvegarde d’un déroulement d’une évaluation (passage d’un questionnaire) </p>
<ul>
<li>Il stocke l’utilisateur, le questionnaire auquel ce dernier a répondu, son score, la durée du passage et les réponses formulées pour chaque question </li>
<li>Une bonne réponse à une question vaut 1 point A la fin d’un parcours, on affiche au stagiaire son score, la durée et les bonnes réponses </li>
<li>Un parcours est effectué en 1 seul passage (pas de pause, ni de sauvegarde de questions ou autre) </li>
<li>Une mauvaise réponse n’a aucun impact sur le score (0) </li>
<li>Lors du parcours, le stagiaire visualise une question à la fois avec les propositions de réponses (Sous forme de boutons radio). </li>
<li>Un bouton suivant mènera vers la question suivante. Séance 1 : </li>
</ul>
<h3 id="Diagramme-de-classes"><a href="#Diagramme-de-classes" class="headerlink" title="Diagramme de classes"></a>Diagramme de classes</h3><ul>
<li><code>ChoixQA</code> est une classe de composition de la classe Course, qui sert à stocker les choix des réponses de chaque question dans la questionnaire. </li>
</ul>
<p><img src="/2019/05/14/projet-javaprojet-sr03/sr03_p_mvc_class.png" alt="Modélisation des données en UML"></p>
<h2 id="Modelisation-des-donnees-en-SQL-JAVA"><a href="#Modelisation-des-donnees-en-SQL-JAVA" class="headerlink" title="Modélisation des données en SQL/JAVA"></a>Modélisation des données en SQL/JAVA</h2><ul>
<li><p><code>QA</code>: La Classe QA est destiné à gérer Question et Answer. Le sujetQ et le sujetA sont les références étrangères. On ajoute ordre afin d’indiquer la position de réponse pour chaque question, et canswer qui signifie la réponse correcte indique si une réponse est bonne pour cette question. </p>
</li>
<li><p><code>QQ</code>: La classe QQ sert à gérer Questionnaire et Question. </p>
</li>
<li><p><code>Course &amp; ChoixQA</code>: On ajoute dans la classe course un key artificiel pour joindre Course et ChoixQA. Lorsque le stagiaire est en train de répondre une questionnaire,  les 3 attributs dans ChoixQA (sujetQ, sujetA, canswer) sont directement obtenu en fonction de la classe QA, et le sujetA ne stocke que la réponse choisit par le stagiaire. Du coup si canswer est true, on sait que la réponse que le stagiaire choisit est correcte.</p>
</li>
</ul>
<p><img src="/2019/05/14/projet-javaprojet-sr03/sr03_p_sql_class.png" alt="Modélisation des données en SQL/JAVA"></p>
<h2 id="Interface-de-DAO"><a href="#Interface-de-DAO" class="headerlink" title="Interface de DAO"></a>Interface de DAO</h2><p>Les interfaces de DAO définissent tous les traitements entre JAVA et SQL. Leurs implémentations sont placés dans autres java files. La modification est possible lorsque qu’on avance le projet.</p>
<ul>
<li><code>CourseDAO</code>:  Puisque la classe ChoixQA est une composition de la classe Course, on met en oeuvre un seul DAO pour cettes deux classes.</li>
</ul>
<p><img src="/2019/05/14/projet-javaprojet-sr03/sr03_p_dao_interface.png" alt="DAO interface en JAVA"></p>
<h2 id="Exemple-de-Realisation-Classe-User"><a href="#Exemple-de-Realisation-Classe-User" class="headerlink" title="Exemple de Réalisation - Classe User"></a>Exemple de Réalisation - Classe User</h2><h3 id="Structure-du-projet"><a href="#Structure-du-projet" class="headerlink" title="Structure du projet"></a>Structure du projet</h3><p>La structure simplifié concernant l’exemple:</p>
<pre><code>src
|--dao
|   |--UserDAO.java  
|   |--UserDAOImpl.java
|--model
|   |--User.java 
|--util
|   |--dbConfig.properties
|   |--ConnSQL.java
</code></pre><h3 id="Codes-de-classe-User"><a href="#Codes-de-classe-User" class="headerlink" title="Codes de classe User"></a>Codes de classe User</h3><p>&lt;User.java&gt;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String login;</span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;	</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String login, String pwd, String fname, String lname, </span></span></span><br><span class="line"><span class="function"><span class="params">            String identity, String society, String phone, Date cdate, String stat)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.login = login;</span><br><span class="line">        …...</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// methods of get</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLogin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> login;</span><br><span class="line">    &#125;</span><br><span class="line">    …...</span><br><span class="line">    <span class="comment">// methods of set</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLogin</span><span class="params">(String login)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.login = login;</span><br><span class="line">    &#125;</span><br><span class="line">    …...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Connexion-entre-JAVA-et-SQL"><a href="#Connexion-entre-JAVA-et-SQL" class="headerlink" title="Connexion entre JAVA et SQL"></a>Connexion entre JAVA et SQL</h3><p>&lt;dbConfig.properties&gt;</p>
<p>On crée un file afin de stocker les paramètres pour connecter SQL. Il est plus pratique pour la gestion.</p>
<pre><code>jdbc.url=jdbc:mysql://localhost/sr02
jdbc.username=sr02
jdbc.password=sr02sr02
jdbc.driver=com.mysql.cj.jdbc.Driver
</code></pre><p>&lt;ConnSQL.java&gt;</p>
<p>La classe ConnSQL conclure deux fonctions principales: </p>
<ul>
<li>connecter le sql </li>
<li>Déconnecter le sql</li>
</ul>
<p>Il suffit d’appeler les deux fonctions lorsque le traitement.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConnSQL</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String URL;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String USERNAME;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String PASSWORD;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String DRIVER;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ResourceBundle rb = ResourceBundle.getBundle(<span class="string">"util.dbConfig"</span>);</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">ConnSQL</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// bind data</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        URL = rb.getString(<span class="string">"jdbc.url"</span>);</span><br><span class="line">        USERNAME = rb.getString(<span class="string">"jdbc.username"</span>);</span><br><span class="line">        PASSWORD = rb.getString(<span class="string">"jdbc.password"</span>);</span><br><span class="line">        DRIVER = rb.getString(<span class="string">"jdbc.driver"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(DRIVER);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// connection</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DriverManager.getConnection(URL, USERNAME, PASSWORD);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(<span class="string">"Fail:connexion!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> conn;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// disconnection</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs,Statement stat,Connection conn)</span></span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(rs!=<span class="keyword">null</span>)rs.close();</span><br><span class="line">                <span class="keyword">if</span>(stat!=<span class="keyword">null</span>)stat.close();</span><br><span class="line">                <span class="keyword">if</span>(conn!=<span class="keyword">null</span>)conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Realisation-de-DAO-Interface-et-implementation"><a href="#Realisation-de-DAO-Interface-et-implementation" class="headerlink" title="Réalisation de DAO - Interface et implémentation"></a>Réalisation de DAO - Interface et implémentation</h3><h4 id="Interface-de-UserDAO"><a href="#Interface-de-UserDAO" class="headerlink" title="Interface de UserDAO"></a>Interface de UserDAO</h4><p>&lt;UserDAO.java&gt;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDAO</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findAll</span><span class="params">()</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(User u)</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">delete</span><span class="params">(String login)</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">findByLogin</span><span class="params">(String login)</span> <span class="keyword">throws</span> SQLException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="Implementation-de-UserDAO-exemple-sur-findByLogin"><a href="#Implementation-de-UserDAO-exemple-sur-findByLogin" class="headerlink" title="Implémentation de UserDAO - exemple sur findByLogin()"></a>Implémentation de UserDAO - exemple sur findByLogin()</h4><p>&lt;UserDAOImpl.java&gt;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDAOImpl</span> <span class="keyword">implements</span> <span class="title">UserDAO</span></span>&#123;</span><br><span class="line">            …..</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">findByLogin</span><span class="params">(String login)</span> <span class="keyword">throws</span> SQLException</span>&#123;</span><br><span class="line">        User u = <span class="keyword">new</span> User();</span><br><span class="line">        String sql = <span class="string">"select * from users where login = ?"</span>;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement pstem = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet res = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;	</span><br><span class="line">            conn = ConnSQL.getConnection();</span><br><span class="line">                    pstem = conn.prepareStatement(sql);</span><br><span class="line">                    pstem.setString(<span class="number">1</span>, login);</span><br><span class="line">            res = pstem.executeQuery();</span><br><span class="line">            System.out.println(<span class="string">"UserDAOImpl.findByLogin()"</span>);</span><br><span class="line">            <span class="keyword">if</span>(res.next())&#123;</span><br><span class="line">                u.setLogin(res.getString(<span class="string">"login"</span>));</span><br><span class="line">                u.setPwd(res.getString(<span class="string">"pwd"</span>));</span><br><span class="line">                u.setFname(res.getString(<span class="string">"fname"</span>));</span><br><span class="line">                u.setLname(res.getString(<span class="string">"lname"</span>));</span><br><span class="line">                u.setIdentity(res.getString(<span class="string">"ident"</span>));</span><br><span class="line">                u.setSociety(res.getString(<span class="string">"society"</span>));</span><br><span class="line">                u.setPhone(res.getString(<span class="string">"phone"</span>));</span><br><span class="line">                u.setCdate(res.getDate(<span class="string">"cdate"</span>));</span><br><span class="line">                u.setStat(res.getString(<span class="string">"stat"</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> SQLException(<span class="string">"Echec:DELETE"</span>);</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            ConnSQL.close(<span class="keyword">null</span>,pstem,conn);</span><br><span class="line">        &#125;</span><br><span class="line">                ConnSQL.close(res,pstem,conn);</span><br><span class="line">        <span class="keyword">return</span> u;</span><br><span class="line">    &#125; </span><br><span class="line">        …...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Teste-findByLogin-par-login-dans-le-server"><a href="#Teste-findByLogin-par-login-dans-le-server" class="headerlink" title="Teste findByLogin() par login dans le server"></a>Teste findByLogin() par login dans le server</h4><p><img src="/2019/05/14/projet-javaprojet-sr03/sr03_p_sql_users.png" alt="Users stocké dans mySQL"></p>
<p>On utilise une compte d’administrateur pour tester: <a href="mailto:alex.z@gmail.com" target="_blank" rel="noopener">alex.z@gmail.com</a>. </p>
<p><img src="/2019/05/14/projet-javaprojet-sr03/sr03_p_login.png" alt="Page de login"></p>
<p><img src="/2019/05/14/projet-javaprojet-sr03/sr03_p_checklogin.png" alt="Page admin"></p>

      
    </div>
    
    
    

    <div>
     
       <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------E N D-------------</div>
    
</div>
      
    </div>

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Web/" rel="tag"> <i class="fa fa-tag"></i> Web</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/05/04/case-conda/" rel="next" title="conda 工具使用">
                <i class="fa fa-chevron-left"></i> conda 工具使用
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/05/16/base-linux-sem/" rel="prev" title="linux 进程间通信-信号量">
                linux 进程间通信-信号量 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="Yanyan NIE" />
            
              <p class="site-author-name" itemprop="name">Yanyan NIE</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">27</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/YanyanNIE" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://instagram.com/yanyan_nie" target="_blank" title="Instagram">
                      
                        <i class="fa fa-fw fa-instagram"></i>Instagram</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://facebook.com/yanyan.nie.946" target="_blank" title="Facebook">
                      
                        <i class="fa fa-fw fa-facebook"></i>Facebook</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:nieyanyan.syoco@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Site Access
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.root-me.org/?lang=en#" title="Root Me" target="_blank">Root Me</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Modelisation-conceptuelle-de-donnees-avec-UML"><span class="nav-number">1.</span> <span class="nav-text">Modélisation conceptuelle de données avec UML</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Rappel-de-description-fonctionnelle"><span class="nav-number">1.1.</span> <span class="nav-text">Rappel  de description fonctionnelle</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Diagramme-de-classes"><span class="nav-number">1.2.</span> <span class="nav-text">Diagramme de classes</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Modelisation-des-donnees-en-SQL-JAVA"><span class="nav-number">2.</span> <span class="nav-text">Modélisation des données en SQL/JAVA</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Interface-de-DAO"><span class="nav-number">3.</span> <span class="nav-text">Interface de DAO</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Exemple-de-Realisation-Classe-User"><span class="nav-number">4.</span> <span class="nav-text">Exemple de Réalisation - Classe User</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Structure-du-projet"><span class="nav-number">4.1.</span> <span class="nav-text">Structure du projet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Codes-de-classe-User"><span class="nav-number">4.2.</span> <span class="nav-text">Codes de classe User</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Connexion-entre-JAVA-et-SQL"><span class="nav-number">4.3.</span> <span class="nav-text">Connexion entre JAVA et SQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Realisation-de-DAO-Interface-et-implementation"><span class="nav-number">4.4.</span> <span class="nav-text">Réalisation de DAO - Interface et implémentation</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Interface-de-UserDAO"><span class="nav-number">4.4.1.</span> <span class="nav-text">Interface de UserDAO</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Implementation-de-UserDAO-exemple-sur-findByLogin"><span class="nav-number">4.4.2.</span> <span class="nav-text">Implémentation de UserDAO - exemple sur findByLogin()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Teste-findByLogin-par-login-dans-le-server"><span class="nav-number">4.4.3.</span> <span class="nav-text">Teste findByLogin() par login dans le server</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yanyan NIE</span>

  
</div>

<!-- 
  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>
  -->



        
<div class="busuanzi-count">
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  
    <span class="site-uv">
      <i class="fa fa-user"></i> visitors
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i> total
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: '5ctOlCB3P2wccSY5cq5VAL99-gzGzoHsz',
        appKey: 'IFNf4fFm9whRJLaAOUbh636F',
        placeholder: 'Add your comments',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  

  

  

</body>
</html>
